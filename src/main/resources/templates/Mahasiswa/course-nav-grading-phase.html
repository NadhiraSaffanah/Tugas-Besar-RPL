<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grading Phase</title>
    <link rel="stylesheet" th:href="@{/css/mahasiswa/course-grading-phase.css}">
    <script th:src="@{/js/mahasiswa/gradingPhase.js}" defer></script>
</head>

<body>
    <header>
        <nav>
            <ul id="nav-left">
                <li><img th:src="@{/images/book.png}" alt="book icon"></li>
                <li><a th:href="@{/mahasiswa/home}">Home</a></li>
                <li><a th:href="@{/mahasiswa/course}">Course</a></li>
            </ul>
            <ul id="nav-right">
                <li>
                    <span th:text="${user.nama}">Nama user</span>
                    <span th:text="${user.email}">email</span>
                </li>
                <li>
                    <div>
                        <a th:href="@{/mahasiswa/profile-page}">
                            <img th:src="@{/images/default-profile.jpg}" alt="profile">
                        </a>
                    </div>
                </li>
                <li><img th:src="@{/images/bell.png}" alt="notif"></li>
                <li><a th:href="@{/logout}"><img th:src="@{/images/logout.png}" alt="logout"></a></li>
            </ul>
        </nav>
    </header>

    <main class="main-content">
        <!--Nav Page-->
        <nav class="course-tabs">
            <a th:href="@{/mahasiswa/grading-phase(id=${selectedMatkulId})}" class="tab-button"
                name="Grading">Grading</a>
            <a th:href="@{/mahasiswa/course-nav-participant(id=${selectedMatkulId})}" class="tab-button"
                name="Participants">Participant</a>
            <a th:href="@{/mahasiswa/course-nav-group(id=${selectedMatkulId})}" class="tab-button"
                name="Group">Groups</a>
        </nav>

        <section id="project">
            <h2>
                <span th:text="${tubes != null ? tubes.namaTubes : 'Project'}">Project Name</span> -

                <span th:text="${header.get('nama_matkul')}">Nama Matkul</span>
            </h2>

            <div id="project-date">
                <div id="start-date">
                    <p>Start Date</p>
                    <h5 th:text="${#temporals.format(header.get('start_date'), 'EEEE, d MMMM yyyy')}">Date</h5>
                </div>
                <div id="end-date">
                    <p>End Date</p>
                    <h5 th:text="${#temporals.format(header.get('end_date'), 'EEEE, d MMMM yyyy')}">Date</h5>
                </div>
            </div>

            <div class="phase-list">
                <div th:if="${tubes==null}" th:text="Currently there is no project."></div>

                <div class="phase-card" th:each="tahap, iterStat : ${listTahap}">
                    <div class="phase-content">
                        <div class="phase-title">
                            <span class="phase-name" th:text="${tahap.namaTahap}">Phase</span>
                        </div>

                        <div class="phase-date">
                            <img th:src="@{/images/calendar.svg}" alt="calendar">
                            <span th:text="${#temporals.format(tahap.tanggalAkhir, 'd MMMM yyyy')}">7 September
                                2025</span>
                        </div>

                        <p class="phase-description" th:text="${tahap.deskripsi}">Membuat persona dan scenario</p>
                    </div>

                    <div class="phase-status-box">
                        <span th:if="${tahap.statusPenilaian == 'Graded'}"
                            th:classappend="${tahap.nilaiTahap >= 80 ? 'status-excellent' : 'status-graded'}"
                            th:text="${tahap.nilaiTahap + '%'}">Excellent 90%</span>

                        <!-- Jika belum dinilai -->
                        <span th:if="${tahap.statusPenilaian != 'Graded'}" class="status-not-graded"
                            th:text="'Not Graded'">
                            Not Graded
                        </span>

                        <a href="javascript:void(0)" class="view-comment-btn" th:attr="data-tahapid=${tahap.id}">
                            View Comment
                        </a>
                    </div>
                </div>

                <div th:if="${#lists.isEmpty(listTahap)}" class="empty-phases">
                    <p>There is currently no phase.</p>
                </div>

            </div>
        </section>

    </main>

    <!-- OVERLAY UNTUK MODAL -->
    <div id="comment-overlay"></div>

    <!-- MODAL COMMENT -->
    <section id="popup-comment">
        <h2>Comment</h2>
        <div id="comment-content">
            <p id="comment-text">This is a sample comment.</p>
        </div>
        <button class="closeComment">Close</button>
    </section>
</body>

</html>